{% extends 'base.html.twig' %}

{% block title %}Dashboard - DeFi Works{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    {#  prints verification success message  #}
    {% for message in app.flashes('success') %}
        {% if loop.first %}
            <div class="alert alert-success">
                {{ message }}
            </div>
        {% endif %}
    {% endfor %}

    {% for message in app.flashes('password_reset_success') %}
        <div class="alert alert-danger" role="alert">{{ message }}</div>
    {% endfor %}

    <h1>{{ user }}'s Dashboard</h1>
    <a href="{{ path('app_home') }}">Home</a>
    <a href="{{ path('app_deposit') }}" class="deposit-btn {% if hasPendingTransaction %} disable-btn {% endif %}">Deposit</a>
    <a {% if balance is null or balance == 0 or hasPendingTransaction %} class="withdraw-btn disable-btn"{% else  %} class="withdraw-btn" {% endif %} href="{{ path('app_withdraw') }}">Withdraw</a>

    <div class="dashboard-content-wrapper">
        <p>Current Portfolio Balance: <span>{% if balance is null %} $0 {% else  %} ${{ balance }} {% endif %}</span></p>
        {% if hasPendingTransaction %}
            <p class="pending-balance">Pending Portfolio Balance: <span>${{ pendingBalance }}</span></p>
        {% endif %}
        <p>Total Interest Gained: <span>***</span></p>
        <p>Current APY: <span>{% if liveApy is defined %} {{ liveApy|round(2, 'floor') }}% {% else %} 4% {% endif %}</span></p>
    </div>

    <div class="manage-account-wrapper">
        <a href="{{ path('app_user_account') }}">Manage Your Account</a>
        <br>
    </div>

</div>
{% endblock %}
