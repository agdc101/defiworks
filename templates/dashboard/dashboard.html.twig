{% extends 'base.html.twig' %}

{% block title %}Dashboard - DeFi Works{% endblock %}

{% block body %}

{#  prints verification success message  #}
{% for message in app.flashes('success') %}
    {% if loop.first %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endif %}
{% endfor %}

{% for message in app.flashes('password_reset_success') %}
    <div class="alert alert-success" role="alert">{{ message }}</div>
{% endfor %}

{% for message in app.flashes('success_pin') %}
    <div class="alert alert-success" role="alert">{{ message }}</div>
{% endfor %}

<h1 class="text-center">{{ user | capitalize }}'s Dashboard</h1>

<div class="dashboard-content-wrapper">
    <section class="dash-info">
        <div class="dash-item">
            <p>Balance</p><span>{% if balance is null %} $0 {% else  %} ${{ balance }} {% endif %}</span>
            {% if pendingBalance != 0 %}
                <p class="pending-balance">Pending Balance: <span>${{ pendingBalance }}</span></p>
            {% endif %}
        </div>
        <div class="dash-item">
            <p>Profit</p><span>{% if profit is null %} $0 {% else  %} ${{ profit }} {% endif %}</span>
        </div>
        <div class="dash-item">
            <p>Growth</p><span>{% if growth is null %} $0 {% else  %} {{ growth }}% {% endif %}</span>
        </div>
        <div class="dash-item">
            <p>APY</p><span>{% if liveApy is defined %} {{ liveApy|round(2, 'floor') }}% {% else %} 4% {% endif %}</span>
        </div>
    </section>

    <section class="dash-buttons">
        <div class="dash-item">
            <a href="{{ path('app_deposit') }}" class="deposit-btn {% if pendingBalance != 0  %} disable-btn {% endif %}">
                <lord-icon
                    class="deposit-icon"
                    src="https://cdn.lordicon.com/yeallgsa.json"
                    trigger="hover"
                    colors="primary:#5d66e6,secondary:#ffffff"
                    stroke="25"
                    target="div">
                </lord-icon>
            Deposit</a>
            {# <lord-icon
                src="https://cdn.lordicon.com/huwchbks.json"
                trigger="hover"
                colors="primary:#5d66e6,secondary:#ffffff"
                style="width:250px;height:250px">
            </lord-icon> #}
        </div>
        <div {% if balance is null or balance == 0 or pendingBalance != 0  %} class="dash-item disabled"{% else  %} class="dash-item" {% endif %} >
            <a {% if balance is null or balance == 0 or pendingBalance != 0  %} class="withdraw-btn disable-btn"{% else  %} class="withdraw-btn" {% endif %} href="{{ path('app_withdraw') }}">
                <lord-icon
                    src="https://cdn.lordicon.com/rgyftmhc.json"
                    trigger="hover"
                    colors="primary:#ffffff,secondary:#5d66e6"
                    stroke="25"
                    target="div">
                </lord-icon>
            Withdraw</a>
        </div>
        <div class="dash-item">
            <a href="{{ path('app_transaction_history') }}">
                <lord-icon
                    src="https://cdn.lordicon.com/wxnxiano.json"
                    trigger="morph"
                    colors="primary:#5d66e6,secondary:#ffffff"
                    stroke="25"
                    target="div">
                </lord-icon>
            Transaction History</a>
        </div>
        <div class="dash-item">
            {# <lord-icon
                src="https://cdn.lordicon.com/dxjqoygy.json"
                trigger="hover"
                colors="primary:#ffffff,secondary:#5d66e6"
                style="width:250px;height:250px">
            </lord-icon> #}
            <a href="{{ path('app_user_account') }}">
                <lord-icon
                    src="https://cdn.lordicon.com/sbiheqdr.json"
                    trigger="hover"
                    colors="primary:#ffffff,secondary:#5d66e6"
                    stroke="25"
                    target="div">
                </lord-icon>
            Manage Account</a>
        </div>
    </section>
</div>

{% endblock %}
